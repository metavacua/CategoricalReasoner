{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Catty Thesis Structure Schema",
  "description": "JSON Schema for validating thesis chapter structure requirements",
  "type": "object",
  "definitions": {
    "chapter": {
      "type": "object",
      "properties": {
        "chapter_title": {
          "type": "string",
          "description": "Chapter title"
        },
        "min_sections": {
          "type": "integer",
          "minimum": 1,
          "description": "Minimum number of sections required"
        },
        "min_lines": {
          "type": "integer",
          "minimum": 1,
          "description": "Minimum number of non-empty, non-comment lines"
        },
        "sections": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/section"
          },
          "description": "List of required or expected sections"
        },
        "content_requirements": {
          "$ref": "#/definitions/content_requirements"
        }
      },
      "required": ["chapter_title", "min_sections", "min_lines"]
    },
    "section": {
      "type": "object",
      "properties": {
        "section_title": {
          "type": "string",
          "description": "Section title"
        },
        "required": {
          "type": "boolean",
          "default": true,
          "description": "Whether this section is required"
        },
        "min_lines": {
          "type": "integer",
          "minimum": 1,
          "description": "Minimum number of lines in section"
        },
        "subsections": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of expected subsections"
        }
      },
      "required": ["section_title"]
    },
    "content_requirements": {
      "type": "object",
      "properties": {
        "requires_definitions": {
          "type": "boolean",
          "default": false,
          "description": "Chapter must contain definitions"
        },
        "requires_examples": {
          "type": "boolean",
          "default": false,
          "description": "Chapter must contain examples"
        },
        "requires_code_listings": {
          "type": "boolean",
          "default": false,
          "description": "Chapter must contain code listings (lstlisting or verbatim)"
        },
        "min_code_listings": {
          "type": "integer",
          "minimum": 0,
          "description": "Minimum number of code listings"
        },
        "requires_tables": {
          "type": "boolean",
          "default": false,
          "description": "Chapter must contain tables"
        },
        "min_tables": {
          "type": "integer",
          "minimum": 0,
          "description": "Minimum number of tables"
        },
        "requires_citations": {
          "type": "boolean",
          "default": false,
          "description": "Chapter must contain citations"
        },
        "requires_figures": {
          "type": "boolean",
          "default": false,
          "description": "Chapter must contain figures"
        }
      }
    }
  },
  "properties": {
    "chapters": {
      "type": "object",
      "properties": {
        "introduction": {
          "$ref": "#/definitions/chapter",
          "default": {
            "chapter_title": "Introduction",
            "min_sections": 3,
            "min_lines": 60,
            "sections": [
              {"section_title": "Motivation", "required": true},
              {"section_title": "Categorical Framework", "required": true},
              {"section_title": "Thesis Structure", "required": true}
            ]
          }
        },
        "categorical-semantic-audit": {
          "$ref": "#/definitions/chapter",
          "default": {
            "chapter_title": "Categorical Semantic Audit",
            "min_sections": 7,
            "min_lines": 300,
            "sections": [
              {"section_title": "Introduction", "required": true},
              {"section_title": "Category Theory Foundation", "required": true},
              {"section_title": "Logics as Categorical Objects", "required": true},
              {"section_title": "Morphism Catalog", "required": true},
              {"section_title": "Two-Dimensional Lattice as Category", "required": true},
              {"section_title": "Curry-Howard Categorical Model", "required": true},
              {"section_title": "Reusable Categorical Ontologies", "required": true},
              {"section_title": "Conclusion", "required": false}
            ],
            "content_requirements": {
              "requires_definitions": true,
              "requires_examples": true,
              "requires_code_listings": true,
              "min_code_listings": 3,
              "requires_tables": true,
              "min_tables": 2,
              "requires_citations": true
            }
          }
        },
        "conclusions": {
          "$ref": "#/definitions/chapter",
          "default": {
            "chapter_title": "Conclusions",
            "min_sections": 2,
            "min_lines": 90,
            "sections": [
              {"section_title": "Summary", "required": true},
              {"section_title": "Contributions", "required": false},
              {"section_title": "Future Work", "required": true}
            ]
          }
        }
      }
    }
  },
  "required": ["chapters"]
}
