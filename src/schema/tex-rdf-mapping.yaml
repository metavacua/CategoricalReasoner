# =============================================================================
# TeX ↔ RDF Provenance Metadata Mapping
# =============================================================================
# Purpose: Define how TeX elements map to RDF classes and properties
# This defines provenance metadata extraction from TeX (unidirectional: TeX → RDF)
# Note: Local RDF authoring is not done in this project
# =============================================================================

# Version and metadata
metadata:
  version: "1.0"
  created: "2025-01-05"
  description: "Bidirectional mapping between TeX elements and RDF resources"

# Mappings for each content type
mappings:
  # Theorem mapping
  theorem:
    rdf_class: "catty:Theorem"
    tex_macro: "\\theorem{id}{title}"
    properties:
      id: "dct:identifier"
      title: "dct:title"
      statement: "catty:hasStatement"
      proof: "catty:hasProof"
      premises: "catty:hasPremise"
    required_children:
      - "statement"
      - "proof"
    citations: "dct:references"
    citation_property: "catty:provedFrom"
    id_pattern: "^thm-[a-z0-9-]+$"
    tex_example: "\\begin{theorem}[thm-weakening]{Weakening}\\nThe statement...\\n\\end{theorem}"

  # Definition mapping
  definition:
    rdf_class: "catty:Definition"
    tex_macro: "\\definition{id}{term}"
    properties:
      id: "dct:identifier"
      term: "catty:definedTerm"
      meaning: "catty:definition"
      title: "dct:title"
    required_children:
      - "term"
      - "meaning"
    citations: "dct:references"
    citation_property: "catty:definedFrom"
    id_pattern: "^def-[a-z0-9-]+$"
    tex_example: "\\begin{definition}[def-structural-rule]{Structural Rule}\\nThe meaning...\\n\\end{definition}"

  # Lemma mapping
  lemma:
    rdf_class: "catty:Lemma"
    tex_macro: "\\lemma{id}{title}"
    properties:
      id: "dct:identifier"
      title: "dct:title"
      statement: "catty:hasStatement"
      proof: "catty:hasProof"
    required_children:
      - "statement"
      - "proof"
    citations: "dct:references"
    citation_property: "catty:provedFrom"
    id_pattern: "^lem-[a-z0-9-]+$"
    tex_example: "\\begin{lemma}[lem-lattice-order]{Lattice Order}\\nThe statement...\\n\\end{lemma}"

  # Proof mapping
  proof:
    rdf_class: "catty:Proof"
    tex_macro: "\\begin{proof}{id}"
    properties:
      id: "dct:identifier"
      steps: "catty:hasStep"
      conclusion: "catty:hasConclusion"
      theorem: "catty:proves"
    required_children:
      - "steps"
      - "conclusion"
    id_pattern: "^prf-[a-z0-9-]+$"
    tex_example: "\\begin{proof}[prf-weakening]\\nStep 1: ...\\n\\end{proof}"

  # Proposition mapping
  proposition:
    rdf_class: "catty:Proposition"
    tex_macro: "\\proposition{id}{title}"
    properties:
      id: "dct:identifier"
      title: "dct:title"
      statement: "catty:hasStatement"
      proof: "catty:hasProof"
    required_children:
      - "statement"
    citations: "dct:references"
    citation_property: "catty:provedFrom"
    id_pattern: "^prop-[a-z0-9-]+$"
    tex_example: "\\begin{proposition}[prop-adjunction]{Adjoint Property}\\nThe statement...\\n\\end{proposition}"

  # Corollary mapping
  corollary:
    rdf_class: "catty:Corollary"
    tex_macro: "\\corollary{id}{title}"
    properties:
      id: "dct:identifier"
      title: "dct:title"
      statement: "catty:hasStatement"
      proof: "catty:hasProof"
      theorem: "catty:followsFrom"
    required_children:
      - "statement"
    citations: "dct:references"
    citation_property: "catty:provedFrom"
    id_pattern: "^cor-[a-z0-9-]+$"
    tex_example: "\\begin{corollary}[cor-linear-lattice]{Linear Lattice}\\nThe statement...\\n\\end{corollary}"

  # Example mapping
  example:
    rdf_class: "catty:Example"
    tex_macro: "\\begin{example}{id}{title}"
    properties:
      id: "dct:identifier"
      title: "dct:title"
      description: "catty:description"
      instantiation: "catty:instantiation"
    required_children:
      - "description"
      - "instantiation"
    citations: "dct:references"
    id_pattern: "^ex-[a-z0-9-]+$"
    tex_example: "\\begin{example}[ex-linear-logic]{Linear Logic Example}\\nThe description...\\n\\end{example}"

  # Remark mapping
  remark:
    rdf_class: "catty:Remark"
    tex_macro: "\\begin{remark}{id}"
    properties:
      id: "dct:identifier"
      content: "catty:content"
    citations: "dct:references"
    id_pattern: "^rmk-[a-z0-9-]+$"
    tex_example: "\\begin{remark}[rmk-notation]\\nThe remark...\\n\\end{remark}"

  # Conjecture mapping
  conjecture:
    rdf_class: "catty:Conjecture"
    tex_macro: "\\begin{conjecture}{id}{title}"
    properties:
      id: "dct:identifier"
      title: "dct:title"
      statement: "catty:hasStatement"
      motivation: "catty:motivation"
    required_children:
      - "statement"
    citations: "dct:references"
    id_pattern: "^cnj-[a-z0-9-]+$"
    tex_example: "\\begin{conjecture}[cnj-completeness]{Completeness Conjecture}\\nThe statement...\\n\\end{conjecture}"

  # Section mapping
  section:
    rdf_class: "catty:Section"
    tex_macro: "\\section{id}{title}"
    properties:
      id: "dct:identifier"
      title: "dct:title"
      content: "catty:hasContent"
    citations: "dct:references"
    citation_property: "prov:wasDerivedFrom"
    id_pattern: "^sec-[a-z0-9-]+$"
    tex_example: "\\section[sec-categorical-foundation]{Categorical Foundation}\\nThe content..."

  # Subsection mapping
  subsection:
    rdf_class: "catty:Subsection"
    tex_macro: "\\subsection{id}{title}"
    properties:
      id: "dct:identifier"
      title: "dct:title"
      content: "catty:hasContent"
    citations: "dct:references"
    id_pattern: "^subsec-[a-z0-9-]+$"
    tex_example: "\\subsection[subsec-morphisms]{Morphisms}\\nThe content..."

  # Text mapping (for regular paragraphs)
  text:
    rdf_class: "catty:Text"
    tex_macro: "(plain text)"
    properties:
      id: "dct:identifier"
      content: "catty:hasContent"
    citations: "dct:references"
    id_pattern: "^txt-[a-z0-9-]+$"

# Provenance extraction rules (TeX → RDF only)
validation:
  # Forward validation: TeX → RDF (extraction only)
  forward:
    - "Every TeX element with given ID can produce corresponding RDF resource"
    - "All required properties can be present in RDF"
    - "Citation keys can match between TeX and RDF"
    - "ID patterns must match defined regex"

  # Consistency checks
  consistency:
    - "All ID patterns must be globally unique"
    - "All citation keys must exist in docs/dissertation/bibliography/citations.yaml"
    - "All external links (DOI, Wikidata, URLs) must be resolvable"

# Citation property mappings
citation_properties:
  provenance:
    - "catty:definedFrom"
    - "catty:provedFrom"
    - "catty:inspiredBy"
    - "prov:wasDerivedFrom"
    - "prov:wasInfluencedBy"

  reference:
    - "dct:references"
    - "dct:isReferencedBy"
    - "catty:hasCitation"
    - "catty:isCitedIn"

# Prefix definitions for RDF URIs
prefixes:
  catty: "https://github.com/metavacua/CategoricalReasoner/ontology/"
  dct: "http://purl.org/dc/terms/"
  prov: "http://www.w3.org/ns/prov#"
  bibo: "http://purl.org/ontology/bibo/"
  rdf: "http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  rdfs: "http://www.w3.org/2000/01/rdf-schema#"
  owl: "http://www.w3.org/2002/07/owl#"
